AWSTemplateFormatVersion: '2010-09-09'

Parameters:
  ProjectName:
    Type: String
    Description: Project Name

  CodebaseVersion:
    Type: String
    Description: Codebase Version

  CodebaseBucketRegion:
    Type: String
    Description: Codebase Bucket Region

  BackendEnv:
    Type: String
    Description: Backend Env

  SimRetrievalLambdaNameBase:
    Type: String
    Default: sim-retrieval
    Description: Lambda name for sim-retrieval

  CreateSimLambdaNameBase:
    Type: String
    Default: create-sim
    Description: Lambda name for create-sim

  DisableSimLambdaNameBase:
    Type: String
    Default: disable-sim
    Description: Lambda name for disable-sim

  DeviceOnboardingLambdaNameBase:
    Type: String
    Default: device-onboarding
    Description: Lambda name for device-onboarding

Outputs:
#  CodebaseBucketUrl:
#    Fn::Join:
#      - ""
#      - 
#        - "https://"
#        - !Ref ProjectName
#        - "-cfn.s3-"
#        - !Ref CodebaseBucketRegion
#        - ".amazonaws.com/
#        - !Ref CodebaseVersion
  CodebaseBucketUrl:
    !Sub "https://${ProjectName}-cfn.s3-${CodebaseBucketRegion}.amazonaws.com/${CodebaseVersion}"

#  SimRetrievalLambdaName:
#    Fn::Join:
#      - ""
#      - 
#        - !Ref SimRetrievalLambdaNameBase
#        - "-"
#        - !Ref ProjectName
#        - "-"
#        - !Ref BackendEnv
  SimRetrievalLambdaName:
    !Sub "${SimRetrievalLambdaNameBase}-${ProjectName}-${BackendEnv}"

#  SimRetrievalLambdaZipPath:
#    Fn::Join:
#      - ""
#      -
#        - !Ref CodebaseVersion
#        - "/"
#        - !Ref SimRetrievalLambdaNameBase
#        - "-"
#        - !Ref ProjectName
#        - "-"
#        - !Ref BackendEnv
#        - .zip
  SimRetrievalLambdaZipPath:
    !Sub "${CodebaseVersion}/${SimRetrievalLambdaNameBase}-${ProjectName}-${BackendEnv}.zip"

  CreateSimLambdaName:
    !Sub "${CreateSimLambdaNameBase}-${ProjectName}-${BackendEnv}"

  CreateSimLambdaZipPath:
    !Sub "${CodebaseVersion}/${CreateSimLambdaNameBase}-${ProjectName}-${BackendEnv}.zip"

  DisableSimLambdaName:
    !Sub "${DisableSimLambdaNameBase}-${ProjectName}-${BackendEnv}"

  DisableSimLambdaZipPath:
    !Sub "${CodebaseVersion}/${DisableSimLambdaNameBase}-${ProjectName}-${BackendEnv}.zip"

  DeviceOnboardingLambdaName:
    !Sub "${DeviceOnboardingLambdaNameBase}-${ProjectName}-${BackendEnv}"

  DeviceOnboardingLambdaZipPath:
    !Sub "${CodebaseVersion}/${DeviceOnboardingLambdaNameBase}-${ProjectName}-${BackendEnv}.zip"

  OnboardingApiKeyName:
    !Sub "device-onboarding-key-${ProjectName}-${BackendEnv}"

#      ApiGatewayUrlSSMParamName: openvpn-onboarding-api-gateway-url
  ApiGatewayUrlSSMParamName:
    Fn::Join:
      - device-onboarding-api-gateway-url-
      - !Ref ProjectName
      - '-'
      - !Ref BackendEnv

#      OnboardingPathSSMParamName: openvpn-onboarding-path
  OnboardingPathSSMParamName:
    Fn::Join:
      - device-onboarding-path-
      - !Ref ProjectName
      - '-'
      - !Ref BackendEnv

#      ProxyServerSSMParamName: openvpn-onboarding-proxy-server
#      BreakoutRegionSSMParamName: breakout-region

  SnsSuccessTopicName:
    Fn::Join:
      - success-
      - !Ref ProjectName
      - '-'
      - !Ref BackendEnv

  SnsFailureTopicName:
    Fn::Join:
      - failure-
      - !Ref ProjectName
      - '-'
      - !Ref BackendEnv

  SqsSimCreateQueueName:
    Fn::Join:
      - sims-create-fifo-
      - !Ref ProjectName
      - '-'
      - !Ref BackendEnv

  SqsSimDisableQueueName:
    Fn::Join:
      - sims-disable-fifo-
      - !Ref ProjectName
      - '-'
      - !Ref BackendEnv

  S3CodeOriginBucket:
    Fn::Join:
      - !Ref ProjectName
      - -cfn


#  ApiGatewayUrl:
#    Description: URL for API Gateway
#    Value:
#      Fn::Sub: https://${ApiGatewayRestApi}.execute-api.${AWS::Region}.amazonaws.com

#  CombinedParams:
#    Description: "Combined parameters"
#    Value:
#      Fn::Join:
#        - ":"
#        - [ !Ref Param1, !Ref Param2 ]

